# MongoDB

> 本篇笔记参考：
>
> [《干货 | SQL 与 NoSQL还在傻傻分不清？》](https://zhuanlan.zhihu.com/p/63371253)

## 1. 理解 NoSQL

**【关系型数据库（SQL）】**

关系数据库（Relational database），是创建在关系模型基础上的数据库，现实世界中的各种实体以及实体之间的各种联系均用关系模型来表示。

- 结构组成
  - 数据库：包括一个或多个表
  - 表（关系 Relation）：是以列和行的形式组织起来的数据的集合
  - 列（属性 Attribute）：在数据库中经常被称为字段
  - 行（值组 Tuple）：在数据库中经常被称为记录

- 优点
  - 事务一致性：通过事务处理保持数据的一致性（ACID）
  - 复杂查询：支持 SQL 语句，可以进行 JOIN 等复杂查询
  - 易于维护：维护成本小，减低了数据冗余和数据不一致的概率

* 缺点
  * 读写性能：在数据量达到一定规模时，由于关系型数据库的系统逻辑非常复杂，为了维护一致性，使得其非常容易发生死锁等的并发问题，所以导致其读写速度下滑非常严重
  * 表结构更新：表结构可以在被定义之后更新，但是如果有比较大的结构变更的话就会变得比较复杂
  * 高并发：网站的用户并发性非常高，往往达到每秒上万次读写请求，对于传统关系型数据库来说，硬盘I/O是一个很大的瓶颈
  * 海量数据：对于关系型数据库来说，在一张包含海量数据的表中查询，效率是非常低的

* 常见的关系型数据库
  * MySQL，Oracle，PostgreSQL
  * [关于 MySQL 学习的笔记](https://github.com/IvanBao97/Notes/tree/main/MySQL)



**【非关系型数据库（NoSQL）】**

非关系型数据库（NoSQL）是对不同于传统的关系数据库的数据库管理系统的统称。

* 结构特点
  * NoSQL 数据库从不遵循关系模型
  * NoSQL 的结构通常提供弱一致性的保证，如最终一致性（BASE - **B**asically **A**vailable, **S**oft state, **E**ventual consistency）

* 优点
  * 读写性能：无需经过 SQL 层的解析，读写性能很高
  * 简单的扩展：基于键值对，数据没有耦合性，容易扩展
  * 存储格式多：支持 key-value 形式、文档形式、图片形式，而关系型数据库则只支持基础类型

* 缺点
  * 查询功能有限：相比于关系型数据库，查询方式及其有限
  * 组合展示数据难：因为无法使用 JOIN 语句，所以对于需要依赖关系组合展示的数据几乎无法实现

* 常见的非关系型数据库

  <img src="D:\桌面\MongoDB\NoSQL.png" alt="NoSQL" style="zoom: 67%;" />

* 使用场景

  * **数据库表 schema 经常变化**
    * 比如在线商城，维护产品的属性经常要增加字段，这就意味着 ORMapping 层的代码和配置要改，如果该表的数据量过百万，新增字段会带来额外开销（重建索引等）。
  * **数据库表字段是复杂数据类型**
    * 对于复杂数据类型，关系型数据库在应用层到数据库层之间的转化代价很大，但 NoSQL 以 json 方式存储，提供了原生态的支持，在效率方便远远高于传统关系型数据库。
  * **高并发数据库请求**
    * 此类应用常见于 web2.0 的网站，很多应用对于数据一致性要求很低，而关系型数据库的事务以及大表 JOIN 反而降低了性能。
  * **海量数据的分布式存储**
    * 海量数据的存储如果选用大型商用数据，如 Oracle，那么整个解决方案的成本是非常高的，要花很多钱在软硬件上。NoSQL 分布式存储，可以部署在廉价的硬件上，是一个性价比非常高的解决方案。



<br>

## MongoDB 介绍

